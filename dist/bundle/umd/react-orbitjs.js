/*! For license information please see react-orbitjs.js.LICENSE.txt */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react")):"function"==typeof define&&define.amd?define(["react"],r):"object"==typeof exports?exports.ReactOrbitjs=r(require("react")):e.ReactOrbitjs=r(e.react)}(self,(function(e){return function(){var r={679:function(e,r,t){"use strict";var o=t(296),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},c={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function i(e){return o.isMemo(e)?s:a[e.$$typeof]||n}a[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[o.Memo]=s;var u=Object.defineProperty,p=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,y=Object.prototype;e.exports=function e(r,t,o){if("string"!=typeof t){if(y){var n=l(t);n&&n!==y&&e(r,n,o)}var s=p(t);f&&(s=s.concat(f(t)));for(var a=i(r),h=i(t),b=0;b<s.length;++b){var m=s[b];if(!(c[m]||o&&o[m]||h&&h[m]||a&&a[m])){var P=d(t,m);try{u(r,m,P)}catch(e){}}}}return r}},103:function(e,r){"use strict";var t="function"==typeof Symbol&&Symbol.for,o=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,c=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,i=t?Symbol.for("react.provider"):60109,u=t?Symbol.for("react.context"):60110,p=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,l=t?Symbol.for("react.suspense"):60113,y=t?Symbol.for("react.suspense_list"):60120,h=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,m=t?Symbol.for("react.block"):60121,P=t?Symbol.for("react.fundamental"):60117,v=t?Symbol.for("react.responder"):60118,g=t?Symbol.for("react.scope"):60119;function O(e){if("object"==typeof e&&null!==e){var r=e.$$typeof;switch(r){case o:switch(e=e.type){case p:case f:case c:case a:case s:case l:return e;default:switch(e=e&&e.$$typeof){case u:case d:case b:case h:case i:return e;default:return r}}case n:return r}}}function S(e){return O(e)===f}r.AsyncMode=p,r.ConcurrentMode=f,r.ContextConsumer=u,r.ContextProvider=i,r.Element=o,r.ForwardRef=d,r.Fragment=c,r.Lazy=b,r.Memo=h,r.Portal=n,r.Profiler=a,r.StrictMode=s,r.Suspense=l,r.isAsyncMode=function(e){return S(e)||O(e)===p},r.isConcurrentMode=S,r.isContextConsumer=function(e){return O(e)===u},r.isContextProvider=function(e){return O(e)===i},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},r.isForwardRef=function(e){return O(e)===d},r.isFragment=function(e){return O(e)===c},r.isLazy=function(e){return O(e)===b},r.isMemo=function(e){return O(e)===h},r.isPortal=function(e){return O(e)===n},r.isProfiler=function(e){return O(e)===a},r.isStrictMode=function(e){return O(e)===s},r.isSuspense=function(e){return O(e)===l},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===c||e===f||e===a||e===s||e===l||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===h||e.$$typeof===i||e.$$typeof===u||e.$$typeof===d||e.$$typeof===P||e.$$typeof===v||e.$$typeof===g||e.$$typeof===m)},r.typeOf=O},296:function(e,r,t){"use strict";e.exports=t(103)},703:function(e,r,t){"use strict";var o=t(414);function n(){}function c(){}c.resetWarningCache=n,e.exports=function(){function e(e,r,t,n,c,s){if(s!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function r(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:c,resetWarningCache:n};return t.PropTypes=t,t}},697:function(e,r,t){e.exports=t(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},297:function(r){"use strict";r.exports=e}},t={};function o(e){if(t[e])return t[e].exports;var n=t[e]={exports:{}};return r[e](n,n.exports,o),n.exports}o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,{a:r}),r},o.d=function(e,r){for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return function(){"use strict";o.r(n),o.d(n,{DataProvider:function(){return d},withData:function(){return x}});var e=o(297),r=o(697),t=o.n(r),c=t().shape({query:t().func.isRequired,on:t().func.isRequired,cache:t().object.isRequired,schema:t().object.isRequired});function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,r){return(i=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function u(e,r){return!r||"object"!==s(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(r){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&i(e,r)}(f,r);var t,o,n,c,s=(n=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(n);if(c){var t=p(this).constructor;e=Reflect.construct(r,arguments,t)}else e=r.apply(this,arguments);return u(this,e)});function f(e,r){var t;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e,r)).dataStore=e.dataStore,t}return t=f,(o=[{key:"getChildContext",value:function(){return{dataStore:this.dataStore}}},{key:"render",value:function(){return e.Children.only(this.props.children)}}])&&a(t.prototype,o),f}(e.Component);f.propTypes={dataStore:c.isRequired,children:t().element.isRequired},f.childContextTypes={dataStore:c.isRequired};var d=f;function l(e,r){if(e===r)return!0;var t=Object.keys(e),o=Object.keys(r);if(t.length!==o.length)return!1;for(var n=Object.prototype.hasOwnProperty,c=0;c<t.length;c++)if(!n.call(r,t[c])||e[t[c]]!==r[t[c]])return!1;return!0}var y=o(679),h=o.n(y);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e,r){return(P=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function v(e,r){return!r||"object"!==b(r)&&"function"!=typeof r?g(e):r}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function R(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){C(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function C(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var j={},w=function(e,r){return R(R({},r),e)};function x(r,t){var o=Boolean(r),n=r||j,s=t||w;return function(r){var t="WithData(".concat(function(e){return e.displayName||e.name||"Component"}(r),")"),a=function(c){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&P(e,r)}(d,c);var a,i,u,p,f=(u=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=O(u);if(p){var t=O(this).constructor;e=Reflect.construct(r,arguments,t)}else e=r.apply(this,arguments);return v(this,e)});function d(e,r){var c;if(function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,d),C(g(c=f.call(this,e,r)),"makeReducePropsToRecords",(function(e,r){return function(t,o){var n;try{n=e.cache.query(r[o])}catch(e){console.warn(e.message),n=void 0}return R(R({},t),{},C({},o,n))}})),C(g(c),"computeChangedRecordProps",(function(e,r,t){return c.selectivelyComputeRecordProps(e,r,t)})),C(g(c),"computeAllRecordProps",(function(e,r){return c.selectivelyComputeRecordProps(!0,e,r)})),C(g(c),"computeChangedQueryProps",(function(e,r){var t=c.getRecordQueries(e,r);return c.expressionChangedProps.reduce(c.makeReducePropsToRecords(e,t),{})})),C(g(c),"selectivelyComputeRecordProps",(function(e,r,t){var o;return(!0===e||e.length)&&(o=c.getRecordQueries(r,t)),!0===e&&(e=Object.keys(o)),e.reduce(c.makeReducePropsToRecords(r,o),{})})),C(g(c),"getConvenienceProps",(function(e){return c.convenienceProps||(c.convenienceProps={dataStore:e,queryStore:function(){return e.query.apply(e,arguments)},updateStore:function(){return e.update.apply(e,arguments)}}),c.convenienceProps})),C(g(c),"getRecordQueries",(function(e,r){return!c.mapRecordsIsConfigured||c.doRecordPropsDependOnOwnProps&&c.haveOwnPropsChanged?c.configureMapRecords(e,r):c.mapRecordsGivenOwnProps(r)})),C(g(c),"mapRecordsGivenOwnProps",(function(e){return c.recordPropsIsFunction?n(e):n})),C(g(c),"configureMapRecords",(function(e,r){c.recordPropsIsFunction="function"==typeof n,c.doRecordPropsDependOnOwnProps=c.recordPropsIsFunction&&n.length>0,c.mapRecordsIsConfigured=!0;var t=c.mapRecordsGivenOwnProps(r),o=Object.keys(t),s={};return c.subscribedModels={},o.forEach((function(e){return c.subscribedModels[e]=[]})),o.forEach((function(r){var o=t[r](e.queryBuilder).toQueryExpression();switch(o.op){case"findRecord":c.subscribedModels[r].push(o.record.type);break;case"findRecords":c.subscribedModels[r].push(o.type);break;case"findRelatedRecord":case"findRelatedRecords":c.subscribedModels[r].push(o.record.type),c.subscribedModels[r].push(c.dataStore.schema.models[o.record.type].relationships[o.relationship].model)}s[r]=o})),o.forEach((function(e){c.subscribedModels[e]=c.subscribedModels[e].filter((function(e,r,t){return t.indexOf(e)===r}))})),o.forEach((function(e){void 0!==c.lastExpressions[e]&&JSON.stringify(s[e])===JSON.stringify(c.lastExpressions[e])||c.expressionChangedProps.push(e)})),c.lastExpressions=s,t})),C(g(c),"updateRecordPropsIfNeeded",(function(){var e={};if(null===c.recordProps)e=R(R({},c.getConvenienceProps(c.dataStore)),c.computeAllRecordProps(c.dataStore,c.props));else if(c.haveOwnPropsChanged&&c.doRecordPropsDependOnOwnProps){e=R(R({},c.recordProps),c.computeChangedQueryProps(c.dataStore,c.props));var r=Object.keys(c.subscribedModels),t=Object.keys(c.getConvenienceProps(c.dataStore));Object.keys(c.recordProps).filter((function(e){return!r.includes(e)&&!t.includes(e)})).forEach((function(r){return delete e[r]}))}else e=R(R({},c.recordProps),c.computeChangedRecordProps(c.dataStoreChangedProps,c.dataStore,c.props));return!(c.recordProps&&l(e,c.recordProps)||(c.recordProps=e,0))})),C(g(c),"updateMergedPropsIfNeeded",(function(){var e,r,t=(e=c.recordProps,r=c.props,s(e,r));return!(c.mergedProps&&l(t,c.mergedProps)||(c.mergedProps=t,0))})),C(g(c),"trySubscribe",(function(){o&&!c.isListening&&(c.isListening=!0,c.dataStore.on("transform",c.handleTransform))})),C(g(c),"tryUnsubscribe",(function(){c.isListening&&(c.isListening=null,c.dataStore.off("transform",c.handleTransform))})),C(g(c),"clearCache",(function(){c.convenienceProps=null,c.recordProps=null,c.mergedProps=null,c.haveOwnPropsChanged=!0,c.dataStoreChangedProps=[],c.expressionChangedProps=[],c.hasDataStoreChanged=!0,c.renderedElement=null,c.mapRecordsIsConfigured=!1,c.lastExpressions={},c.subscribedModels={}})),C(g(c),"handleTransform",(function(e){if(c.isListening){var r=[];e.operations.forEach((function(e){switch(e.op){case"addRecord":case"replaceRecord":case"updateRecord":if(r.push(e.record.type),void 0===e.record.relationships)break;Object.keys(e.record.relationships).forEach((function(t){r.push(c.dataStore.schema.models[e.record.type].relationships[t].model)}));break;case"removeRecord":r.push(e.record.type);var t=c.dataStore.schema.models[e.record.type].relationships;Object.keys(t).map((function(e){return t[e]})).forEach((function(e){r.push(e.model)}));break;case"replaceKey":case"replaceAttribute":r.push(e.record.type);break;case"addToRelatedRecords":case"removeFromRelatedRecords":case"replaceRelatedRecord":r.push(e.record.type),r.push(c.dataStore.schema.models[e.record.type].relationships[e.relationship].model);break;case"replaceRelatedRecords":r.push(e.record.type),e.relatedRecords.forEach((function(e){r.push(e.type)}));break;default:console.warn("This transform operation is not supported in react-orbitjs.")}})),new Set(r).forEach((function(e){Object.keys(c.subscribedModels).forEach((function(r){c.subscribedModels[r].includes(e)&&(c.hasDataStoreChanged=!0,c.dataStoreChangedProps.push(r))}))})),c.forceUpdate()}})),c.dataStore=e.dataStore||r.dataStore,!c.dataStore)throw new Error('Could not find "dataStore" in either the context or '+'props of "'.concat(t,'". ')+"Either wrap the root component in a <DataProvider>, "+'or explicitly pass "dataStore" as a prop to "'.concat(t,'".'));return c.clearCache(),c}return a=d,(i=[{key:"shouldComponentUpdate",value:function(){return this.haveOwnPropsChanged||this.hasDataStoreChanged}},{key:"componentDidMount",value:function(){this.trySubscribe()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){l(e,this.props)||(this.haveOwnPropsChanged=!0)}},{key:"componentWillUnmount",value:function(){this.tryUnsubscribe(),this.clearCache()}},{key:"render",value:function(){var t=this.haveOwnPropsChanged,o=this.hasDataStoreChanged,n=this.renderedElement,c=!0;n&&(c=o||t&&this.doRecordPropsDependOnOwnProps);var s=!1;return c&&(s=this.updateRecordPropsIfNeeded()),this.haveOwnPropsChanged=!1,this.hasDataStoreChanged=!1,this.dataStoreChangedProps=[],this.expressionChangedProps=[],(s||t)&&this.updateMergedPropsIfNeeded()||!n?(this.renderedElement=(0,e.createElement)(r,this.mergedProps),this.renderedElement):n}}])&&m(a.prototype,i),d}(e.Component);return a.displayName=t,a.WrappedComponent=r,a.contextTypes={dataStore:c},a.propTypes={dataStore:c},h()(a,r)}}}(),n}()}));